const { v4: uuidv4 } = require("uuid")

module.exports = {
  up: async (queryInterface, Sequelize) => {
    // Get user IDs from the database
    const users = await queryInterface.sequelize.query("SELECT id FROM users LIMIT 3")
    const userIds = users[0].map((user) => user.id)

    // Get portfolio IDs from the database
    const portfolios = await queryInterface.sequelize.query("SELECT id, user_id FROM portfolios LIMIT 3")
    const portfolioData = portfolios[0]

    // Create sample education data
    const educations = [
      // User 1 Education
      {
        id: uuidv4(),
        user_id: userIds[0],
        portfolio_id: portfolioData.find((p) => p.user_id === userIds[0])?.id || null,
        institution_name: "Stanford University",
        institution_logo: "https://example.com/stanford-logo.png",
        institution_url: "https://www.stanford.edu",
        degree: "Master of Science",
        field_of_study: "Computer Science",
        education_type: "masters",
        start_date: "2018-09-01",
        end_date: "2020-06-30",
        is_current: false,
        location: "Stanford, CA",
        is_remote: false,
        gpa: "3.9/4.0",
        description:
          "Specialized in Artificial Intelligence and Machine Learning. Conducted research on neural networks and deep learning algorithms.",
        courses: JSON.stringify([
          "Advanced Machine Learning",
          "Deep Learning",
          "Natural Language Processing",
          "Computer Vision",
          "Distributed Systems",
        ]),
        honors: JSON.stringify(["Magna Cum Laude", "Dean's List"]),
        activities: JSON.stringify(["AI Research Group", "Hackathon Organizer"]),
        projects: JSON.stringify([
          "Developed a neural network for image recognition",
          "Created a distributed system for large-scale data processing",
        ]),
        achievements: JSON.stringify([
          "Published research paper on deep learning",
          "Won 2nd place in university hackathon",
        ]),
        skills: JSON.stringify(["TensorFlow", "PyTorch", "Python", "Machine Learning", "Deep Learning"]),
        is_highlighted: true,
        display_order: 0,
        certificate_url: "https://example.com/stanford-certificate.pdf",
        is_verified: true,
        verification_date: new Date(),
        verification_method: "Official transcript",
        additional_info: JSON.stringify({
          advisor: "Dr. Jane Smith",
          thesis: "Neural Networks for Computer Vision Applications",
        }),
        created_at: new Date(),
        updated_at: new Date(),
      },
      {
        id: uuidv4(),
        user_id: userIds[0],
        portfolio_id: portfolioData.find((p) => p.user_id === userIds[0])?.id || null,
        institution_name: "University of California, Berkeley",
        institution_logo: "https://example.com/berkeley-logo.png",
        institution_url: "https://www.berkeley.edu",
        degree: "Bachelor of Science",
        field_of_study: "Computer Science",
        education_type: "bachelors",
        start_date: "2014-09-01",
        end_date: "2018-05-30",
        is_current: false,
        location: "Berkeley, CA",
        is_remote: false,
        gpa: "3.8/4.0",
        description:
          "Focused on software engineering and algorithms. Participated in multiple research projects and internships.",
        courses: JSON.stringify([
          "Data Structures",
          "Algorithms",
          "Operating Systems",
          "Database Systems",
          "Software Engineering",
        ]),
        honors: JSON.stringify(["Cum Laude", "Dean's List (all semesters)"]),
        activities: JSON.stringify(["Computer Science Club President", "Competitive Programming Team"]),
        projects: JSON.stringify([
          "Developed a compiler for a custom programming language",
          "Created a distributed database system",
        ]),
        achievements: JSON.stringify([
          "Placed 3rd in ACM Programming Contest",
          "Received Outstanding Undergraduate Award",
        ]),
        skills: JSON.stringify(["Java", "C++", "Algorithms", "Data Structures", "Software Design"]),
        is_highlighted: true,
        display_order: 1,
        certificate_url: "https://example.com/berkeley-certificate.pdf",
        is_verified: true,
        verification_date: new Date(),
        verification_method: "Official transcript",
        additional_info: JSON.stringify({
          advisor: "Dr. John Doe",
          thesis: "Efficient Algorithms for Graph Processing",
        }),
        created_at: new Date(),
        updated_at: new Date(),
      },

      // User 2 Education
      {
        id: uuidv4(),
        user_id: userIds[1],
        portfolio_id: portfolioData.find((p) => p.user_id === userIds[1])?.id || null,
        institution_name: "Massachusetts Institute of Technology",
        institution_logo: "https://example.com/mit-logo.png",
        institution_url: "https://www.mit.edu",
        degree: "Doctor of Philosophy",
        field_of_study: "Artificial Intelligence",
        education_type: "doctorate",
        start_date: "2020-09-01",
        end_date: null,
        is_current: true,
        location: "Cambridge, MA",
        is_remote: false,
        gpa: "4.0/4.0",
        description:
          "Conducting research on reinforcement learning and autonomous systems. Working on developing AI systems that can learn and adapt in complex environments.",
        courses: JSON.stringify([
          "Advanced Reinforcement Learning",
          "Autonomous Systems",
          "Robotics",
          "Advanced AI",
          "Research Methods",
        ]),
        honors: JSON.stringify(["Full Scholarship", "Research Excellence Award"]),
        activities: JSON.stringify(["AI Research Lab", "Robotics Club"]),
        projects: JSON.stringify([
          "Developing autonomous drone navigation systems",
          "Creating reinforcement learning algorithms for complex decision-making",
        ]),
        achievements: JSON.stringify([
          "Published 3 papers in top AI conferences",
          "Received research grant from DARPA",
        ]),
        skills: JSON.stringify(["Reinforcement Learning", "Robotics", "Python", "TensorFlow", "ROS"]),
        is_highlighted: true,
        display_order: 0,
        certificate_url: null,
        is_verified: false,
        verification_date: null,
        verification_method: null,
        additional_info: JSON.stringify({
          advisor: "Dr. Robert Johnson",
          research_focus: "Reinforcement Learning for Autonomous Systems",
        }),
        created_at: new Date(),
        updated_at: new Date(),
      },
      {
        id: uuidv4(),
        user_id: userIds[1],
        portfolio_id: portfolioData.find((p) => p.user_id === userIds[1])?.id || null,
        institution_name: "Harvard University",
        institution_logo: "https://example.com/harvard-logo.png",
        institution_url: "https://www.harvard.edu",
        degree: "Master of Science",
        field_of_study: "Computer Science",
        education_type: "masters",
        start_date: "2018-09-01",
        end_date: "2020-05-30",
        is_current: false,
        location: "Cambridge, MA",
        is_remote: false,
        gpa: "3.95/4.0",
        description:
          "Specialized in AI and machine learning. Conducted research on neural networks and natural language processing.",
        courses: JSON.stringify([
          "Machine Learning",
          "Natural Language Processing",
          "Computer Vision",
          "Advanced Algorithms",
          "Distributed Systems",
        ]),
        honors: JSON.stringify(["Summa Cum Laude", "Outstanding Graduate Award"]),
        activities: JSON.stringify(["AI Research Group", "Teaching Assistant for ML courses"]),
        projects: JSON.stringify([
          "Developed a natural language processing system for medical records",
          "Created a computer vision system for autonomous navigation",
        ]),
        achievements: JSON.stringify([
          "Published research in top ML conference",
          "Received department award for outstanding research",
        ]),
        skills: JSON.stringify([
          "Machine Learning",
          "Natural Language Processing",
          "Computer Vision",
          "Python",
          "PyTorch",
        ]),
        is_highlighted: true,
        display_order: 1,
        certificate_url: "https://example.com/harvard-certificate.pdf",
        is_verified: true,
        verification_date: new Date(),
        verification_method: "Official transcript",
        additional_info: JSON.stringify({
          advisor: "Dr. Sarah Williams",
          thesis: "Neural Networks for Natural Language Understanding",
        }),
        created_at: new Date(),
        updated_at: new Date(),
      },

      // User 3 Education
      {
        id: uuidv4(),
        user_id: userIds[2],
        portfolio_id: portfolioData.find((p) => p.user_id === userIds[2])?.id || null,
        institution_name: "Carnegie Mellon University",
        institution_logo: "https://example.com/cmu-logo.png",
        institution_url: "https://www.cmu.edu",
        degree: "Bachelor of Science",
        field_of_study: "Software Engineering",
        education_type: "bachelors",
        start_date: "2016-09-01",
        end_date: "2020-05-30",
        is_current: false,
        location: "Pittsburgh, PA",
        is_remote: false,
        gpa: "3.7/4.0",
        description:
          "Focused on software engineering practices, architecture, and design. Participated in multiple team projects and internships.",
        courses: JSON.stringify([
          "Software Engineering",
          "Software Architecture",
          "Web Development",
          "Mobile Development",
          "Database Systems",
        ]),
        honors: JSON.stringify(["Dean's List", "Outstanding Project Award"]),
        activities: JSON.stringify(["Software Engineering Club", "Hackathon Participant", "Open Source Contributor"]),
        projects: JSON.stringify([
          "Developed a full-stack web application for event management",
          "Created a mobile app for fitness tracking",
        ]),
        achievements: JSON.stringify(["Won university hackathon", "Contributed to popular open source projects"]),
        skills: JSON.stringify(["JavaScript", "React", "Node.js", "Java", "SQL", "Software Architecture"]),
        is_highlighted: true,
        display_order: 0,
        certificate_url: "https://example.com/cmu-certificate.pdf",
        is_verified: true,
        verification_date: new Date(),
        verification_method: "Official transcript",
        additional_info: JSON.stringify({
          advisor: "Dr. Michael Brown",
          capstone_project: "Enterprise-level Event Management System",
        }),
        created_at: new Date(),
        updated_at: new Date(),
      },
      {
        id: uuidv4(),
        user_id: userIds[2],
        portfolio_id: portfolioData.find((p) => p.user_id === userIds[2])?.id || null,
        institution_name: "Udacity",
        institution_logo: "https://example.com/udacity-logo.png",
        institution_url: "https://www.udacity.com",
        degree: "Nanodegree",
        field_of_study: "Full Stack Web Development",
        education_type: "certificate",
        start_date: "2020-06-01",
        end_date: "2020-12-15",
        is_current: false,
        location: null,
        is_remote: true,
        gpa: null,
        description:
          "Completed an intensive program focused on full-stack web development using modern technologies and best practices.",
        courses: JSON.stringify([
          "Frontend Development with React",
          "Backend Development with Node.js",
          "Database Design",
          "API Development",
          "Deployment and DevOps",
        ]),
        honors: JSON.stringify(["Distinguished Graduate"]),
        activities: null,
        projects: JSON.stringify([
          "Developed a full-stack social media application",
          "Created a RESTful API for a e-commerce platform",
        ]),
        achievements: JSON.stringify([
          "Received mentorship from industry professionals",
          "Project featured in Udacity showcase",
        ]),
        skills: JSON.stringify(["React", "Node.js", "Express", "MongoDB", "AWS", "Docker"]),
        is_highlighted: false,
        display_order: 1,
        certificate_url: "https://example.com/udacity-certificate.pdf",
        is_verified: true,
        verification_date: new Date(),
        verification_method: "Online verification",
        additional_info: JSON.stringify({
          mentor: "Jane Smith",
          final_grade: "Excellent",
        }),
        created_at: new Date(),
        updated_at: new Date(),
      },
    ]

    await queryInterface.bulkInsert("educations", educations)
  },

  down: async (queryInterface, Sequelize) => {
    await queryInterface.bulkDelete("educations", null, {})
  },
}
