module.exports = {
  async up(queryInterface, Sequelize) {
    // First, create some visitors
    await queryInterface.bulkInsert(
      "visitors",
      [
        {
          visitor_id: "visitor_123456789",
          portfolio_id: 1,
          user_id: 1,
          first_visit: new Date("2024-01-01T10:00:00Z"),
          last_visit: new Date("2024-01-15T14:30:00Z"),
          visit_count: 5,
          page_views: 25,
          total_time_spent: 1200,
          first_referrer: "https://google.com/search?q=john+doe+portfolio",
          last_referrer: "https://linkedin.com",
          first_landing_page: "/",
          last_landing_page: "/projects",
          country: "United States",
          region: "California",
          city: "San Francisco",
          primary_device: "desktop",
          primary_browser: "Chrome",
          primary_os: "Windows 10",
          is_bot: false,
          engagement_score: 85,
          metadata: JSON.stringify({
            tags: ["returning_visitor", "high_engagement"],
            segments: ["tech_professional"],
          }),
          created_at: new Date("2024-01-01T10:00:00Z"),
          updated_at: new Date("2024-01-15T14:30:00Z"),
        },
        {
          visitor_id: "visitor_987654321",
          portfolio_id: 1,
          user_id: 1,
          first_visit: new Date("2024-01-10T15:20:00Z"),
          last_visit: new Date("2024-01-10T15:45:00Z"),
          visit_count: 1,
          page_views: 3,
          total_time_spent: 180,
          first_referrer: "https://twitter.com",
          last_referrer: "https://twitter.com",
          first_landing_page: "/",
          last_landing_page: "/contact",
          country: "Canada",
          region: "Ontario",
          city: "Toronto",
          primary_device: "mobile",
          primary_browser: "Safari",
          primary_os: "iOS 17",
          is_bot: false,
          engagement_score: 45,
          metadata: JSON.stringify({
            tags: ["new_visitor", "mobile_user"],
            segments: ["social_media_traffic"],
          }),
          created_at: new Date("2024-01-10T15:20:00Z"),
          updated_at: new Date("2024-01-10T15:45:00Z"),
        },
        {
          visitor_id: "visitor_555666777",
          portfolio_id: 1,
          user_id: 1,
          first_visit: new Date("2024-01-12T09:15:00Z"),
          last_visit: new Date("2024-01-14T16:30:00Z"),
          visit_count: 3,
          page_views: 12,
          total_time_spent: 720,
          first_referrer: "https://github.com",
          last_referrer: "https://dev.to",
          first_landing_page: "/projects",
          last_landing_page: "/about",
          country: "United Kingdom",
          region: "England",
          city: "London",
          primary_device: "desktop",
          primary_browser: "Firefox",
          primary_os: "Ubuntu 22.04",
          is_bot: false,
          engagement_score: 70,
          metadata: JSON.stringify({
            tags: ["developer", "returning_visitor"],
            segments: ["tech_community"],
          }),
          created_at: new Date("2024-01-12T09:15:00Z"),
          updated_at: new Date("2024-01-14T16:30:00Z"),
        },
      ],
      {},
    )

    // Then create analytics records
    await queryInterface.bulkInsert(
      "analytics",
      [
        // Visitor 1 - Session 1
        {
          portfolio_id: 1,
          user_id: 1,
          visitor_id: "visitor_123456789",
          session_id: "session_001",
          page_path: "/",
          page_title: "John Doe - Full Stack Developer",
          referrer: "https://google.com/search?q=john+doe+portfolio",
          referrer_domain: "google.com",
          user_agent:
            "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",
          ip_address: "192.168.1.100",
          country: "United States",
          region: "California",
          city: "San Francisco",
          device_type: "desktop",
          operating_system: "Windows 10",
          browser: "Chrome",
          browser_version: "91.0.4472.124",
          screen_resolution: "1920x1080",
          language: "en-US",
          timezone: "America/Los_Angeles",
          time_on_page: 45,
          scroll_depth: 80,
          is_bot: false,
          is_unique_visitor: true,
          is_returning_visitor: false,
          utm_source: "google",
          utm_medium: "organic",
          utm_campaign: null,
          utm_term: "john doe portfolio",
          utm_content: null,
          custom_data: JSON.stringify({
            exitPage: false,
            conversionGoal: "portfolio_view",
          }),
          created_at: new Date("2024-01-01T10:00:00Z"),
          updated_at: new Date("2024-01-01T10:00:00Z"),
        },
        {
          portfolio_id: 1,
          user_id: 1,
          visitor_id: "visitor_123456789",
          session_id: "session_001",
          page_path: "/about",
          page_title: "About - John Doe Portfolio",
          referrer: "https://johndoe.dev/",
          referrer_domain: "johndoe.dev",
          user_agent:
            "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",
          ip_address: "192.168.1.100",
          country: "United States",
          region: "California",
          city: "San Francisco",
          device_type: "desktop",
          operating_system: "Windows 10",
          browser: "Chrome",
          browser_version: "91.0.4472.124",
          screen_resolution: "1920x1080",
          language: "en-US",
          timezone: "America/Los_Angeles",
          time_on_page: 120,
          scroll_depth: 95,
          is_bot: false,
          is_unique_visitor: false,
          is_returning_visitor: false,
          utm_source: null,
          utm_medium: null,
          utm_campaign: null,
          utm_term: null,
          utm_content: null,
          custom_data: JSON.stringify({
            exitPage: false,
          }),
          created_at: new Date("2024-01-01T10:01:00Z"),
          updated_at: new Date("2024-01-01T10:01:00Z"),
        },
        {
          portfolio_id: 1,
          user_id: 1,
          visitor_id: "visitor_123456789",
          session_id: "session_001",
          page_path: "/projects",
          page_title: "Projects - John Doe Portfolio",
          referrer: "https://johndoe.dev/about",
          referrer_domain: "johndoe.dev",
          user_agent:
            "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",
          ip_address: "192.168.1.100",
          country: "United States",
          region: "California",
          city: "San Francisco",
          device_type: "desktop",
          operating_system: "Windows 10",
          browser: "Chrome",
          browser_version: "91.0.4472.124",
          screen_resolution: "1920x1080",
          language: "en-US",
          timezone: "America/Los_Angeles",
          time_on_page: 180,
          scroll_depth: 100,
          is_bot: false,
          is_unique_visitor: false,
          is_returning_visitor: false,
          utm_source: null,
          utm_medium: null,
          utm_campaign: null,
          utm_term: null,
          utm_content: null,
          custom_data: JSON.stringify({
            exitPage: false,
            conversionGoal: "project_view",
          }),
          created_at: new Date("2024-01-01T10:03:00Z"),
          updated_at: new Date("2024-01-01T10:03:00Z"),
        },
        // Visitor 2 - Mobile session
        {
          portfolio_id: 1,
          user_id: 1,
          visitor_id: "visitor_987654321",
          session_id: "session_002",
          page_path: "/",
          page_title: "John Doe - Full Stack Developer",
          referrer: "https://twitter.com/johndoe/status/123456789",
          referrer_domain: "twitter.com",
          user_agent:
            "Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.0 Mobile/15E148 Safari/604.1",
          ip_address: "192.168.2.50",
          country: "Canada",
          region: "Ontario",
          city: "Toronto",
          device_type: "mobile",
          operating_system: "iOS 17",
          browser: "Safari",
          browser_version: "17.0",
          screen_resolution: "390x844",
          language: "en-CA",
          timezone: "America/Toronto",
          time_on_page: 30,
          scroll_depth: 60,
          is_bot: false,
          is_unique_visitor: true,
          is_returning_visitor: false,
          utm_source: "twitter",
          utm_medium: "social",
          utm_campaign: "portfolio_share",
          utm_term: null,
          utm_content: "tweet_link",
          custom_data: JSON.stringify({
            exitPage: false,
          }),
          created_at: new Date("2024-01-10T15:20:00Z"),
          updated_at: new Date("2024-01-10T15:20:00Z"),
        },
        {
          portfolio_id: 1,
          user_id: 1,
          visitor_id: "visitor_987654321",
          session_id: "session_002",
          page_path: "/contact",
          page_title: "Contact - John Doe Portfolio",
          referrer: "https://johndoe.dev/",
          referrer_domain: "johndoe.dev",
          user_agent:
            "Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.0 Mobile/15E148 Safari/604.1",
          ip_address: "192.168.2.50",
          country: "Canada",
          region: "Ontario",
          city: "Toronto",
          device_type: "mobile",
          operating_system: "iOS 17",
          browser: "Safari",
          browser_version: "17.0",
          screen_resolution: "390x844",
          language: "en-CA",
          timezone: "America/Toronto",
          time_on_page: 90,
          scroll_depth: 85,
          is_bot: false,
          is_unique_visitor: false,
          is_returning_visitor: false,
          utm_source: null,
          utm_medium: null,
          utm_campaign: null,
          utm_term: null,
          utm_content: null,
          custom_data: JSON.stringify({
            exitPage: true,
            conversionGoal: "contact_view",
          }),
          created_at: new Date("2024-01-10T15:25:00Z"),
          updated_at: new Date("2024-01-10T15:25:00Z"),
        },
        // Visitor 3 - Developer from GitHub
        {
          portfolio_id: 1,
          user_id: 1,
          visitor_id: "visitor_555666777",
          session_id: "session_003",
          page_path: "/projects",
          page_title: "Projects - John Doe Portfolio",
          referrer: "https://github.com/johndoe",
          referrer_domain: "github.com",
          user_agent: "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:109.0) Gecko/20100101 Firefox/115.0",
          ip_address: "192.168.3.75",
          country: "United Kingdom",
          region: "England",
          city: "London",
          device_type: "desktop",
          operating_system: "Ubuntu 22.04",
          browser: "Firefox",
          browser_version: "115.0",
          screen_resolution: "1440x900",
          language: "en-GB",
          timezone: "Europe/London",
          time_on_page: 240,
          scroll_depth: 100,
          is_bot: false,
          is_unique_visitor: true,
          is_returning_visitor: false,
          utm_source: "github",
          utm_medium: "referral",
          utm_campaign: null,
          utm_term: null,
          utm_content: "profile_link",
          custom_data: JSON.stringify({
            exitPage: false,
            conversionGoal: "project_view",
          }),
          created_at: new Date("2024-01-12T09:15:00Z"),
          updated_at: new Date("2024-01-12T09:15:00Z"),
        },
      ],
      {},
    )
  },

  async down(queryInterface, Sequelize) {
    await queryInterface.bulkDelete("analytics", null, {})
    await queryInterface.bulkDelete("visitors", null, {})
  },
}
